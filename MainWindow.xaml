<Window x:Class="AP_HA.MainWindow" x:Name="This"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="JPBM-BodyViewer" Width="800" Height="600" MinWidth="400" MinHeight="400" Icon="/AP-HA;component/icon/flughafensicherheit.ico" MouseWheel="Window_MouseWheel">

    <DockPanel LastChildFill="True">
        <DockPanel.DataContext>
            <Binding ElementName="This" />
        </DockPanel.DataContext>
        <Menu DockPanel.Dock="Top" IsMainMenu="True">
            <MenuItem Header="_Datei">
                <MenuItem Name="menuOpenFolder" Header="_Stapel laden" ToolTip="Neuen Stapel laden" Click="openFolder">
                    <MenuItem.Icon>
                        <Image  Width="20" Height="20" Source="/AP-HA;component/icon/openFolder.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Name="menuCloseFolder" Header="_Stapel Beenden" ToolTip="Aktuellen Stapel beenden" Click="closeFolder" IsEnabled="{Binding Path=StackIsLoaded}">
                    <MenuItem.Icon>
                        <Image Width="17" Height="17" Source="/AP-HA;component/icon/closeFolder.png"></Image>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator />
                <MenuItem Name="menuExitProgram" Header="_Beenden" Click="exitProgram" ToolTip="Programm schliessen" />
            </MenuItem>
            <MenuItem Name="menuEdit" Header="_Bearbeiten">
                <MenuItem Name="menuCutStack" Header="_Stapelgröße" IsEnabled="{Binding Path=StackIsLoaded}">
                    <MenuItem Name="menuCutBeforeCursor" Header="_Bilder links entfernen" Click="cutBeforeCursor" ToolTip="Alle Bilder vor aktuellem Bild ausblenden" IsEnabled="{Binding Path=CutableLeft}">
                        <MenuItem.Icon>
                            <Image Source="/AP-HA;component/icon/CutButtonBefore.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Name="menuCutAfterCursor" Header="_Bilder rechts entfernen" Click="cutAfterCursor" ToolTip="Alle Bilder nach aktuellem Bild ausblenden" IsEnabled="{Binding Path=CutableLeft}">
                        <MenuItem.Icon>
                            <Image Source="/AP-HA;component/icon/CutButtonAfter.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <Separator />
                    <MenuItem Name="menuBackToOriginalCut" Header="_Ganzen Stapel anzeigen" Click="backToOriginalCut" ToolTip="Gesamten Stapel anzeigen" IsEnabled="{Binding Path=StackCutted}">
                        <MenuItem.Icon>
                            <Image Source="/AP-HA;component/icon/CutButtonBackToOriginal.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                </MenuItem>
            </MenuItem>           
            <MenuItem Header="_Einstellungen">
                <MenuItem Name="menuMouseSettings" Header="_Maus" />
            </MenuItem>           
        </Menu>

        <ToolBarTray Name="toolBarTray1" Background="#15000040" DockPanel.Dock="Top" Height="40">
            <ToolBar Name="toolBar0">
                <Button Name="btnOpenFolder" Click="openFolder" >
                    <Image Width="25" Height="25" Source="/AP-HA;component/icon/openFolder.png" ToolTip="{Binding Path=ToolTip, ElementName=menuOpenFolder}"></Image>
                </Button>
                <Button  Name="btnCloseFolder" Click="closeFolder" IsEnabled="{Binding Path=StackIsLoaded}" ToolTip="{Binding Path=ToolTip, ElementName=menuCloseFolder}">
                    <Image Width="22" Height="22" Source="/AP-HA;component/icon/closeFolder.png" />
                </Button>
                <Button  Name="btnCutBefore" Click="cutBeforeCursor" IsEnabled="{Binding Path=CutableLeft}" ToolTip="{Binding Path=ToolTip, ElementName=menuCutBeforeCursor}">
                    <Image Width="19" Height="19" Source="/AP-HA;component/icon/CutButtonBefore.png" ToolTip="Alle Bilder vor aktuellem Bild ausblenden" />
                </Button>
                <Button  Name="btnCutAfter"  Click="cutAfterCursor" IsEnabled="{Binding Path=CutableLeft}" ToolTip="{Binding Path=ToolTip, ElementName=menuCutAfterCursor}">
                    <Image Width="19" Height="19" Source="/AP-HA;component/icon/CutButtonAfter.png" />
                </Button>
                <Button  Name="btnCutBackToOriginal" Click="backToOriginalCut" IsEnabled="{Binding Path=StackIsCutted}" ToolTip="{Binding Path=ToolTip, ElementName=menuBackToOriginalCut}">
                    <Image Width="19" Height="19" Source="/AP-HA;component/icon/CutButtonBackToOriginal.png" />
                </Button>
            </ToolBar>
            <ToolBar Name="toolBar1">
                <Button Content="ZoomIn" Name="btnZoomIn"  Click="btnZoomIn_Click" />
                <Button Content="ZoomOut" Name="btnZoomOut" Click="btnZoomOut_Click" />
                <Button Content="Verschieben" Name="btnMove" Click="btnMove_Click" />
            </ToolBar>
        </ToolBarTray>
        
        <StatusBar DockPanel.Dock="Bottom" Name="statusBar" Background="LightGray">
            <StatusBarItem>
                <TextBlock>Bereit</TextBlock>
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock Name="debugTxtBox" Foreground="Red" TextAlignment="Right">
                    DebugTextBox
                </TextBlock>
            </StatusBarItem>
        </StatusBar>

        <Slider DockPanel.Dock="Bottom" Height="23" Name="stackSlider" Margin="2,0,2,0" Background="#15000040" ValueChanged="stackSlider_ValueChanged" IsEnabled="{Binding Path=StackIsLoaded}" SmallChange="1" Foreground="Blue" BorderBrush="Red">
            <Slider.DataContext>
                <Binding ElementName="This" />
            </Slider.DataContext>
        </Slider>

        <StackPanel DockPanel.Dock="Left" Orientation="Vertical" Background="#15000040">
            <Label Margin="2" FontWeight="Bold">Helligkeit</Label>
            <Slider Name="BrightnessSlider" Height="23" Width="100" Margin="2" Value="1" ValueChanged="BrightnessSlider_ValueChanged" Maximum="2" IsSnapToTickEnabled="True" TickFrequency="0.01" IsEnabled="{Binding Path=StackIsLoaded}" />
            <Label Margin="2" FontWeight="Bold">Kontrast</Label>
            <Slider Name="ContrastSlider" Height="23" Width="100" Margin="2" Value="1" ValueChanged="ContrastSlider_ValueChanged" Maximum="2" IsSnapToTickEnabled="True" TickFrequency="0.01" IsEnabled="{Binding Path=StackIsLoaded}" />
        </StackPanel>

        <StackPanel DockPanel.Dock="Right" Orientation="Vertical" Background="#15000040">
            <Label Margin="5,0" FontWeight="Bold">Innereienmarkierer</Label>
            <ListBox Height="160" Name="marksListBox" Width="160" IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding}" Margin="5,0" ScrollViewer.VerticalScrollBarVisibility="Visible" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <DockPanel Width="150">
                            <Rectangle Width="12" Height="12" Fill="{Binding BrushColor}" />
                            <CheckBox IsChecked="{Binding Visible}" Margin="6" />
                            <Label Content="{Binding Name}" MaxWidth="74" />
                            <Button Content="-" Width="20" Height="20" HorizontalAlignment="Right" FontWeight="Bold" Click="removeMarkFromList" Margin="0,0,16,0" />
                        </DockPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            
            <StackPanel Orientation="Horizontal">
                <TextBox Height="23" Name="markNameTextBox" DockPanel.Dock="Left" Width="135" Padding="1" Margin="5" />
                <Button Content="+" Width="20" Height="20" Name="addMarkToListbutton" FontWeight="Bold" Click="addMarkToListbutton_Click" />
            </StackPanel>
        </StackPanel>

        <ScrollViewer Name="scrollViewer" VerticalScrollBarVisibility="Visible" HorizontalScrollBarVisibility="Visible" PreviewMouseLeftButtonDown="scrollViewer_PreviewMouseLeftButtonDown" MouseMove="scrollViewer_MouseMove" MouseLeftButtonUp="scrollViewer_MouseLeftButtonUp" PreviewMouseLeftButtonUp="scrollViewer_MouseLeftButtonUp">
            <Border BorderBrush="Black" BorderThickness="1,1,1,1">
                <Canvas Name="canvas" Background="#fff" Focusable="True" MouseLeftButtonDown="canvas_MouseLeftButtonDown">
                    <Image Name="imgControl" Height="{Binding Path=ActualHeight, ElementName=canvas}" Width="{Binding Path=ActualWidth, ElementName=canvas}"  Stretch="Uniform" />
                </Canvas>
            </Border>
        </ScrollViewer>
    </DockPanel>
</Window>
